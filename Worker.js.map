{"mappings":"AAGAA,KAAKC,iBAAiB,QAAQ,SAAUC,OAC1BC,EAAPC,EAAiB,QAAVD,EAAAD,EAAME,YAAN,IAAAD,OAAA,EAAAA,EAAYE,OAEnBC,EAAQ,GAAgBC,OAAdH,MAAAA,OAAA,EAAAA,EAAMI,QAAQ,mCAE9BC,QAAQC,IAAI,mCAAoC,CAAEN,KAAAA,IAElD,IAAMO,EAAU,CACfL,KAAAA,EACAF,KAAAA,EACAQ,KAAM,wBAENC,IAAK,4BAGNX,EAAMY,UAAUd,KAAKe,aAAaC,iBAbpB,2BAa4CL,OAI3DX,KAAKC,iBAAiB,qBAAqB,SAAUC,GAMpDA,EAAMe,aAAaC,QAEnB,IAAQC,GAAWjB,EAAMe,aAAab,MAAQ,IAAtCe,OACFC,EAAe,WAAiBb,OAAPY,GAE/BnB,KAAKqB,QAAQC,WAAW,IAAMF","sources":["src/ui/Worker.js"],"sourcesContent":["\"use strict\";\r\n// https://serviceworke.rs/push-clients_service-worker_doc.html\r\n\r\nself.addEventListener(\"push\", function (event) {\r\n\tconst data = event.data?.json();\r\n\tconst title = \"You Have Been Challenged\";\r\n\tconst body = `${data?.oppName} wishes to play you in a match.`;\r\n\r\n\tconsole.log(\"[Service Worker] Push Received: \", { data });\r\n\r\n\tconst options = {\r\n\t\tbody,\r\n\t\tdata,\r\n\t\ticon: \"assets/brand/logo.png\",\r\n\t\t// badge: \"img/img2.png\",\r\n\t\ttag: 'chess-scape-notification'\r\n\t};\r\n\r\n\tevent.waitUntil(self.registration.showNotification(title, options));\r\n});\r\n\r\n\r\nself.addEventListener(\"notificationclick\", function (event) {\r\n\t// console.log(\"Notification clicked\", {\r\n\t// \tevent,\r\n\t// \tnotification: event.notification,\r\n\t// });\r\n\r\n\tevent.notification.close(); // Android doesn't close the notification when you click on it : http://crbug.com/463146\r\n\r\n\tconst { roomID } = event.notification.data || {};\r\n\tconst queryString = `?roomID=${roomID}`\r\n\t\r\n\tself.clients.openWindow(\"/\" + queryString);\r\n\r\n\t// self.clients.matchAll().then(function (clientList) {\r\n\t// \tif (clientList.length > 0) {\r\n\t// \t\treturn clientList[0].focus();\r\n\t// \t}\r\n\r\n\t// \treturn self.clients.openWindow(\"../push-clients_demo.html\");\r\n\t// });\r\n});\r\n\r\n\r\n// https://developers.google.com/web/updates/2015/03/push-notifications-on-the-open-web#unsubscribe_a_users_device"],"names":["self","addEventListener","event","ref","data","json","body","concat","oppName","console","log","options","icon","tag","waitUntil","registration","showNotification","notification","close","roomID","queryString","clients","openWindow"],"version":3,"file":"Worker.js.map"}